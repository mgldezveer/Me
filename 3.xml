<mxfile host="app.diagrams.net">
    <diagram name="Алгоритм определения прав доступа" id="permissions-flow">
        <mxGraphModel dx="827" dy="1169" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                
                <!-- Начало -->
                <mxCell id="start" value="&lt;b&gt;Начало&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
                    <mxGeometry x="373" y="30" width="80" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Получить роль пользователя -->
                <mxCell id="get_role" value="Получить роль пользователя из CurrentUser.Role" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
                    <mxGeometry x="323" y="130" width="180" height="60" as="geometry"/>
                </mxCell>
                
                <!-- Switch(Роль) -->
                <mxCell id="switch_role" value="Switch(Роль пользователя)" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
                    <mxGeometry x="348" y="210" width="130" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Case Guest -->
                <mxCell id="case_guest" value="&lt;b&gt;Case &quot;Guest&quot;:&lt;/b&gt;&lt;br&gt;Только вкладка &quot;Товары&quot;&lt;br&gt;(без фильтров, сортировки)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="73" y="310" width="150" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Case Client -->
                <mxCell id="case_client" value="&lt;b&gt;Case &quot;Client&quot;:&lt;/b&gt;&lt;br&gt;Только вкладка &quot;Товары&quot;&lt;br&gt;(без фильтров, сортировки)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
                    <mxGeometry x="273" y="310" width="150" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Case Manager -->
                <mxCell id="case_manager" value="&lt;b&gt;Case &quot;Manager&quot;:&lt;/b&gt;&lt;br&gt;• Товары (с фильтрами)&lt;br&gt;• Заказы (просмотр)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
                    <mxGeometry x="473" y="310" width="150" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Case Admin -->
                <mxCell id="case_admin" value="&lt;b&gt;Case &quot;Admin&quot;:&lt;/b&gt;&lt;br&gt;• Товары (с фильтрами)&lt;br&gt;• Заказы (CRUD)&lt;br&gt;• Администрирование (CRUD)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
                    <mxGeometry x="673" y="310" width="150" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Настроить интерфейс -->
                <mxCell id="setup_ui" value="Настроить интерфейс MainForm согласно правам доступа" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="348" y="420" width="130" height="60" as="geometry"/>
                </mxCell>
                
                <!-- Отобразить вкладки -->
                <mxCell id="display_tabs" value="Отобразить соответствующие вкладки в TabControl" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
                    <mxGeometry x="348" y="500" width="130" height="60" as="geometry"/>
                </mxCell>
                
                <!-- Конец -->
                <mxCell id="end" value="&lt;b&gt;Конец&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
                    <mxGeometry x="373" y="580" width="80" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Связи -->
                <mxCell id="conn1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="start" target="get_role">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="get_role" target="switch_role">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn3" value="&quot;Guest&quot;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="switch_role" target="case_guest">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn4" value="&quot;Client&quot;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="switch_role" target="case_client">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn5" value="&quot;Manager&quot;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="switch_role" target="case_manager">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn6" value="&quot;Admin&quot;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="switch_role" target="case_admin">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="case_guest" target="setup_ui">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="148" y="390"/>
                            <mxPoint x="148" y="450"/>
                            <mxPoint x="413" y="450"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="conn8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="case_client" target="setup_ui">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="348" y="390"/>
                            <mxPoint x="348" y="450"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="conn9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="case_manager" target="setup_ui">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="548" y="390"/>
                            <mxPoint x="548" y="450"/>
                            <mxPoint x="413" y="450"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="conn10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="case_admin" target="setup_ui">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="748" y="390"/>
                            <mxPoint x="748" y="450"/>
                            <mxPoint x="413" y="450"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="conn11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="setup_ui" target="display_tabs">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="display_tabs" target="end">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>
